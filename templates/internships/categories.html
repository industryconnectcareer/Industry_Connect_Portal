{% extends "base.html" %}
{% block content %}

<style>
  .category-container {
      padding: 25px;
      max-width: 1100px;
      margin: auto;
  }

  .category-header {
      font-size: 30px;
      font-weight: 700;
      margin-bottom: 25px;
      color: #0a575d;
      text-align: center;
  }

  .section-title {
      font-size: 20px;
      font-weight: 700;
      margin: 25px 0 15px;
      color: #0a575d;
      display: flex;
      justify-content: space-between;
      align-items: center;
  }

  .count-tag {
      background: #e1f4f3;
      color: #0a575d;
      font-size: 13px;
      padding: 4px 10px;
      border-radius: 6px;
      font-weight: 600;
  }

  .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
  }

  .item-card {
      background: #ffffff;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0px 4px 14px rgba(0,0,0,0.08);
      transition: 0.25s;
      text-decoration: none;
      color: inherit;
      display: block;
  }

  .item-card:hover {
      transform: translateY(-6px);
      box-shadow: 0px 6px 20px rgba(0,0,0,0.12);
  }

  .item-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #0a575d;
  }

  .item-company {
      color: #555;
      font-size: 14px;
      margin-bottom: 6px;
  }

  .item-sub {
      color: #666;
      font-size: 13px;
      margin-bottom: 8px;
  }

  .pill {
      display: inline-block;
      font-size: 12px;
      background: #ffd369;
      color: #222;
      padding: 3px 8px;
      border-radius: 6px;
      font-weight: 600;
      margin-top: 5px;
  }

  .skill-tag {
      display: inline-block;
      background: #e4f2ff;
      color: #005b94;
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 6px;
      margin: 3px 3px 0 0;
  }

  .no-data {
      padding: 10px 0;
      color: #777;
      font-size: 14px;
      font-style: italic;
      text-align: center;
  }

  hr {
      margin: 40px 0;
      border: none;
      border-top: 1px solid #ddd;
  }
</style>


<div class="category-container">

    <!-- CATEGORY TITLE -->
    <h2 class="category-header">
        {{ selected_category|capitalize }} Opportunities
    </h2>


    <!-- ============ INTERNSHIPS SECTION ============ -->
    <div class="section-title">
        Internships
        <span class="count-tag">{{ internships|length }} found</span>
    </div>

    {% if internships %}
    <div class="item-grid">
        {% for i in internships %}
        <a href="{{ url_for('internships.internship_detail', id=i.id) }}" class="item-card">

            <div class="item-title">{{ i.title }}</div>

            <div class="item-company">
                {{ i.company or "Company not provided" }}
            </div>

            <div class="item-sub">
                {{ i.mode }} • {{ i.location or "Location not provided" }}
            </div>

            {% if i.stipend %}
            <div class="pill">Stipend: {{ i.stipend }}</div>
            {% endif %}

            <!-- Skills -->
            {% if i.skills %}
            <div style="margin-top:6px;">
                {% for s in i.skills.split(",") %}
                <span class="skill-tag">{{ s.strip() }}</span>
                {% endfor %}
            </div>
            {% endif %}

        </a>
        {% endfor %}
    </div>
    {% else %}
      <p class="no-data">No internships found for this category.</p>
    {% endif %}


    <hr>


    <!-- ============ OJT SECTION ============ -->
    <div class="section-title">
        OJT Programs (Company Training)
        <span class="count-tag">{{ ojts|length }} found</span>
    </div>

    {% if ojts %}
    <div class="item-grid">
        {% for o in ojts %}
        <a href="{{ url_for('ojt.ojt_detail', ojt_id=o.id) }}" class="item-card">
            

            <div class="item-title">{{ o.title }}</div>

            <div class="item-company">
                {{ o.company or "Company not provided" }}
            </div>

            <div class="item-sub">
                {{ o.mode }} • {{ o.duration or "Duration not specified" }}
            </div>

            {% if o.stipend %}
            <div class="pill">Stipend: {{ o.stipend }}</div>
            {% endif %}

            {% if o.skills %}
            <div style="margin-top:6px;">
                {% for s in o.skills.split(",") %}
                <span class="skill-tag">{{ s.strip() }}</span>
                {% endfor %}
            </div>
            {% endif %}

        </a>
        {% endfor %}
    </div>
    {% else %}
      <p class="no-data">No OJT programs found for this category.</p>
    {% endif %}

</div>

{% endblock %}